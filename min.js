w=130;W=w*5;c.width=c.height=W;M=Math;R=M.random;function A(){return R()-.5}P=parseInt;T=a.createImageData(W,W);D=T.data;function z(v,x,y){var X=v[0]+x;var Y=v[1]+y;return X*X+Y*Y+v[2]*v[2]<1}m=0;f=[];for(q=0;q<w*w*3;)f[q++]=0;B=function(){for(L=0;L++<w*10;){x=q%w/w;y=(q-q%w)/w/w;p=[0,0,-3.5];v=[(.5-(x+R()/w))*.03,(.5-(y+R()/w))*.03,.03];d=1;for(r=g=b=I=0;I++<400;){for(i=0;i<3;)p[i]+=v[i++]*(1-R()/2);if(R()<.003)for(i=0;i<3;)v[i++]+=A()*.01;x=.7*p[0];y=.7*(p[2]-1);i=.7*(p[1]+.3);j=x*x+9/4*y*y+i*i-1;j*=j*j;j-=x*x*i*i*i+9/80*y*y*i*i*i;if(j<0){v=[A()/10,A()/10,A()/10];d=.5}if(z(p,2.5,1)){g=2;b=r=3;break}if(z(p,-2.5,1)){r=3;break}if(z(p,0,-2.5)||z(p,0,3)){g=b=2;r=3;break}}j=M.max(0,v[1]*27);f[Q=q*3]+=r+j*1.5;f[++Q]+=d*g+j;f[++Q]+=d*b+j;q=++m%(w*w)}I=M.ceil(m/w/w)/255;for(x=0;x<W;x++)for(y=0;y<W;){i=P(x/5)+P(y/5)*w;j=(x+ +y++*W)*4;if(i>q&&q)break;for(L=0;L<3;)D[j+L]=f[i*3+L++]/I;D[j+3]=255}a.putImageData(T,0,0);setTimeout(B,5)};B();