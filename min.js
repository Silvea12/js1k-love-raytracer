function A(){return R()-.5}function Z(a,b,c){return X=a[0]+b,Y=a[1]+c,X*X+Y*Y+a[2]*a[2]<1}for(c.width=c.height=w=120,M=Math,R=M.random,T=a.createImageData(w,w),D=T.data,f=[],K=3*w*w;K;)f[--K]=0;B=function(){for(K++,I=w*w;I;){for(x=I%w/w,y=~~(I/w)/w,p=[0,0,-3.5],v=[.03*(.5-(x+R()/w)),.03*(.5-(y+R()/w)),.03],d=1,r=g=b=J=0;J++<200;){for(i=0;3>i;)p[i]+=v[i++];if(R()<.004)for(;i;)v[--i]+=.01*A();x=.7*p[0],y=.7*(p[2]-1),z=.7*(p[1]+.3),j=x*x+9/4*y*y+z*z-1,j*=j*j,j-=x*x*z*z*z+9/80*y*y*z*z*z,0>j&&(v=[A()/10,A()/10,A()/10],d=.5),Z(p,2.5,1)&&(g=2,b=r=3),Z(p,-2.5,1)&&(r=3),(Z(p,0,-2.5)||Z(p,0,3))&&(g=b=2,r=3)}for(C=M.max(0,27*v[1]),f[S=3*I]+=r+1.5*C,f[++S]+=d*g+C,f[++S]+=d*b+C,P=0;3>P;)D[4*I+P]=255*(f[3*I+P++]/K);D[4*I--+3]=255}a.putImageData(T,0,0),setTimeout(B)},B();